<!--
Stratovan Corporation Copyright and Disclaimer Notice:
Copyright (c) 2014 Stratovan Corporation. All Rights Reserved.
Permission to use, copy, modify, and distribute this software and its
documentation without a signed licensing agreement, is hereby granted,
provided that this copyright notice, this paragraph and the following two
paragraphs appear in all copies, modifications, and distributions.
IN NO EVENT SHALL STRATOVAN BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
STRATOVAN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
STRATOVAN SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED
TO, THE IMPLIED WARRANTIES OF USE AND FITNESS FOR A PARTICULAR PURPOSE. THE
SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED HEREUNDER IS
PROVIDED "AS IS". STRATOVAN HAS NO OBLIGATION TO PROVIDE MAINTENANCE,
SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS UNLESS DIRECTED BY THE
U.S. GOVERNMENT'S TRANSPORTATION SECURITY ADMINISTRATION (TSA).
-->
<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stratovan DICOS Toolkit Class Interfaces and Architecture: main.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="DICOS.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DICOS_TOOLKIT_x120.png"/>
     <div id="projectbrief">Stratovan implementation of DICOS v03 specification</div>
   &#160;<span id="projectnumber">Mon Sep 25 2023</span>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b603177d1c3186fd902b084fbd319d0d.html">DICOSExamples</a></li><li class="navelem"><a class="el" href="dir_41ceef1138eaf96ec073370981c954ec.html">examples</a></li><li class="navelem"><a class="el" href="dir_5c897487f58cfb703d1db5e970ab5cde.html">Host</a></li><li class="navelem"><a class="el" href="dir_04f594b929807050ae3ac76dadadfdf7.html">HostDaemon</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Host/HostDaemon/main.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_host_2_host_daemon_2main_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span><span class="comment">/// Stratovan Corporation Copyright and Disclaimer Notice:</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span><span class="comment">///</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span><span class="comment">/// Copyright (c) 2015 Stratovan Corporation. All Rights Reserved.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span><span class="comment">///</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span><span class="comment">/// Permission to use, copy, modify, and distribute this software and its</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span><span class="comment">/// documentation without a signed licensing agreement, is hereby granted,</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span><span class="comment">/// provided that this copyright notice, this paragraph and the following two</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span><span class="comment">/// paragraphs appear in all copies, modifications, and distributions.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span><span class="comment">///</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span><span class="comment">/// IN NO EVENT SHALL STRATOVAN BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span><span class="comment">/// SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span><span class="comment">/// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span><span class="comment">/// STRATOVAN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span><span class="comment">///</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span><span class="comment">/// STRATOVAN SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span><span class="comment">/// TO, THE IMPLIED WARRANTIES OF USE AND FITNESS FOR A PARTICULAR PURPOSE. THE</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span><span class="comment">/// SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED HEREUNDER IS</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"></span><span class="comment">/// PROVIDED &quot;AS IS&quot;. STRATOVAN HAS NO OBLIGATION TO PROVIDE MAINTENANCE,</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span><span class="comment">/// SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS UNLESS DIRECTED BY THE</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span><span class="comment">/// U.S. GOVERNMENT&#39;S TRANSPORTATION SECURITY ADMINISTRATION (TSA).</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"></span><span class="comment">///</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span><span class="comment">//////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// This example shows how to utilize the User-Level API to receive and process DICOS objects over the network.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// A daemon process is created that instantiates a SDICOS.Network.DcsServer object which starts listening</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// for connections from SDICOS.Network.DcsClient objects.</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// The accompanying SimpleClient executable can be used to send a DICOS file to the DICOS Server.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// </span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// To run the example first start the DICOS Server with an ip address and port and then</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// run SimpleClient with the same ip address and port. If the transfer is successful, log </span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// messages should appear somewhere in /var/log depending upon how the system logging is setup.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// The log messages on a successful transfer should look like:</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// HostDaemonExample[1705]: received dicos data via User-API CT. Id 1357197849.30379.8598.66202.21690000.Errors</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// The server saves the tag listings to log files based on modality and date.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// </span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_d_i_c_o_s_8h.html">SDICOS/DICOS.h</a>&quot;</span>   <span class="comment">//DICOS include header</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">    #include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">    #include &lt;syslog.h&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">    #include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">    #include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">    #include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">    #include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifndef EXIT_FAILURE</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">    #define EXIT_FAILURE 1</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">   55</a></span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#ifndef EXIT_SUCCESS</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">    #define EXIT_SUCCESS</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="_host_2_host_daemon_2main_8cpp.html#a687984f47d8cce148d1b914d2b79612a">   59</a></span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="namespace_host_daemon_example.html">   61</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_host_daemon_example.html">HostDaemonExample</a></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * \class DICOSCallbackHandler</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> * The DICOSCallbackHandler class implements the SDICOS::Network::IReceiveCallback interface methods to</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> * process DICOS files received from a DICOS Server. The callback handler is registered with the DcsServer object </span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> * by calling SDICOS::DcsServer::StartListening() along with a flag indicating indicating which </span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> * API level, (User, Module or Tag) should be called when DICOS files are received.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> * &lt;b&gt;IMPORTANT IMPLEMENTATION DETAILS&lt;/b&gt;:</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> *  </span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> *  The DcsServer uses a separate thread to dispatch received DICOS files to the SDICOS::Network::IReceiveCallback handler.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> *  This thread blocks on these callbacks so the callback implementations must be fast and deterministic.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> *  In general, when used in conjunction with a DcsServer the implementation of methods in SDICOS::Network::IReceiveCallback should take ownership</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> *  of the DICOS data, pass it to a processing thread and return.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> * This example handler implements the callbacks for the User-Level, Module-Level API, Tag-Level API and error handler.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> * User Level API Callbacks:</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> *      - void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::CT&gt; &amp;ct, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::DX&gt; &amp;dx, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::AIT2D&gt; &amp;ait, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::AIT3D&gt; &amp;ait, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::TDR&gt; &amp;tdr, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> * Module-Level API Callbacks:</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::CTModule&gt; &amp;ct, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::AIT2DModule&gt; &amp;ait, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::AIT3DModule&gt; &amp;ait, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::DXModule&gt; &amp;dx, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::QRModule&gt; &amp;qr, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::TDRModule&gt; &amp;tdr, const SDICOS::ErrorLog &amp;errorlog)</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> *  </span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * Tag-Level API Callback. This is a pure virtual method and must be implemented.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFile(SDICOS::Utils::DicosData&lt;SDICOS::AttributeManager&gt; &amp;manager, const SDICOS::ErrorLog &amp;errorlog) </span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> * Error Handler Callback. This is a pure virtual method and must be implemented.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> *      - virtual void OnReceiveDicosFileError(const SDICOS::ErrorLog &amp;errorlog, const SDICOS::Utils::SessionData &amp;sessiondata)</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">class </span>DICOSCallbackHandler : <span class="keyword">public</span> <a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_i_receive_callback.html">SDICOS::Network::IReceiveCallback</a></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    DICOSCallbackHandler() : IReceiveCallback()</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        m_LogFolder = <span class="stringliteral">&quot;C:\\temp&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        m_LogFolder = <span class="stringliteral">&quot;/var/log/DICOSServer&quot;</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="namespace_s_d_i_c_o_s.html#aaa2db0f877f825a2c8b4137b58de6286">SDICOS::FolderExists</a>(m_LogFolder)) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordtype">bool</span> b = <a class="code" href="namespace_s_d_i_c_o_s.html#a6c43f24b9fe14505de13b445e277c222">SDICOS::CreateFolder</a>(m_LogFolder,<span class="keyword">true</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">if</span>(b) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                LogReceiveDicosFile(<span class="stringliteral">&quot;Constructing DICOSCallbackHandler&quot;</span>, <span class="stringliteral">&quot;Unable to open log folder /var/log/DICOSDaemon&quot;</span>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::CT&gt;</a> &amp;ct, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">// Write a text file with the tags and attribute values</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;CT&quot;</span>, ct);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="comment">// Handle CT Object using the User-API</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">// The DcsServer thread that dispatches DICOS Data to callback methods blocks until the callback returns.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment">// Non-trivial callback implementations should take ownership of the data, pass it to a processing thread</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">// and return control to the DcsServer.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment">// Take ownership of DICOS Data and pass it to a thread for processing. The caller is now responsible for deleting it.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_c_t.html">SDICOS::CT</a>* pCTData(NULL);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        ct.<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#a769e5bbaa37e937cb6bac9c789910a78">TakeOwnership</a>(pCTData);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="comment">// ct is now invalidate and cannot be used</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span>(pCTData) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="comment">// Simple example of logging information when a DICOS file is received.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;User-API CT&quot;</span>, pCTData-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_i_o_d_common.html#a41298db2be00a8966aa16caeb44ad488">GetSopInstanceUID</a>(), errorlog);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment">// Pass the data to a processing thread and return</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            this-&gt;ProcessCTDataOnAnotherThread(pCTData);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;User-API CT&quot;</span>, <span class="stringliteral">&quot;Unable to take ownership of DICOS data.&quot;</span>, errorlog);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::DX&gt;</a> &amp;dx, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">// Handle DX object using User API</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;User-API DX&quot;</span>, dx-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_i_o_d_common.html#a41298db2be00a8966aa16caeb44ad488">GetSopInstanceUID</a>(), errorlog);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;DX&quot;</span>,dx);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::AIT2D&gt;</a> &amp;ait, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">// Handle AIT2D object using User API</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;User-API AIT2D&quot;</span>,ait-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_i_o_d_common.html#a41298db2be00a8966aa16caeb44ad488">GetSopInstanceUID</a>(), errorlog);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;AIT2D&quot;</span>,ait);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::AIT3D&gt;</a> &amp;ait, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">// Handle ATI3D object using User API</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;User-API AIT3D&quot;</span>, ait-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_i_o_d_common.html#a41298db2be00a8966aa16caeb44ad488">GetSopInstanceUID</a>(), errorlog);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;AIT3D&quot;</span>,ait);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::TDR&gt;</a> &amp;tdr, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// Handle TDR object using the User API</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;User-API TDR&quot;</span>, tdr-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_i_o_d_common.html#a41298db2be00a8966aa16caeb44ad488">GetSopInstanceUID</a>(), errorlog);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;TDR&quot;</span>,tdr);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::CTModule&gt;</a> &amp;ct, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">// Handle CTModule object using Module-Level API.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;Module-API CT&quot;</span>, ct-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_scanner_common.html#ab7916fd0a91efe17a207a3cc89267b9d">GetSopCommon</a>().GetSopInstanceUID(), errorlog);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;CTModule&quot;</span>,ct);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::AIT2DModule&gt;</a> &amp;ait, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="comment">// Handle AIT2DModule object using Module-Level API.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;Module-API AIT2D&quot;</span>,ait-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_scanner_common.html#ab7916fd0a91efe17a207a3cc89267b9d">GetSopCommon</a>().GetSopInstanceUID(), errorlog);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;AIT2DModule&quot;</span>,ait);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::AIT3DModule&gt;</a> &amp;ait, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">// Handle AIT3DModule object using Module-Level API.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;Module-API AIT3D&quot;</span>, ait-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_scanner_common.html#ab7916fd0a91efe17a207a3cc89267b9d">GetSopCommon</a>().GetSopInstanceUID(), errorlog);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;AIT3DModule&quot;</span>,ait);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::DXModule&gt;</a> &amp;dx, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="comment">// Handle DXModule objects using Module-Level API.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;Module-API DX&quot;</span>, dx-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_scanner_common.html#ab7916fd0a91efe17a207a3cc89267b9d">GetSopCommon</a>().GetSopInstanceUID(), errorlog);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;DXModule&quot;</span>,dx);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::QRModule&gt;</a> &amp;qr, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">// Handle QRModule objects using the Module-Level API.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;Module-API QR&quot;</span>,qr-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_scanner_common.html#ab7916fd0a91efe17a207a3cc89267b9d">GetSopCommon</a>().GetSopInstanceUID(), errorlog);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;QRModule&quot;</span>,qr);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::TDRModule&gt;</a> &amp;tdr, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// Handle TDRModule objects using the Module-Level API.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;Module-API TDR&quot;</span>,tdr-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_scanner_common.html#ab7916fd0a91efe17a207a3cc89267b9d">GetSopCommon</a>().GetSopInstanceUID(), errorlog);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;TDRModule&quot;</span>,tdr);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFile(<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;SDICOS::AttributeManager&gt;</a> &amp;manager, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">// Catch all callback that handles DICOS data which does not fall into one of the expected callbacks</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// for the User API or Module API.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// This method is a pure virtual method and must be overridden.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        std::stringbuf buffer;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        std::ostream os(&amp;buffer);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_linked_list.html">SDICOS::AttributeManager::TagList</a> tl;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        manager-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_attribute_manager.html#ab80c4e9b880ba5284b657533bb93da6d">GetTagListing</a>(tl,<span class="keyword">true</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        os &lt;&lt; <span class="stringliteral">&quot;Num Attributes&quot;</span> &lt;&lt; tl.<a class="code" href="class_s_d_i_c_o_s_1_1_linked_list.html#ac0af6f5e99aad03e05216d26b5b84a01">Length</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        os &lt;&lt; <span class="stringliteral">&quot;Transfer Syntax &quot;</span> &lt;&lt; manager-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_attribute_manager.html#a1c8f02752c20efa9e1e3a51f2b600721">GetTransferSyntax</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        os &lt;&lt; <span class="stringliteral">&quot;Errors &quot;</span> &lt;&lt; errorlog;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;Tag-Level AttributeManager&quot;</span>, buffer.str().c_str());</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        this-&gt;WriteTagListing(<span class="stringliteral">&quot;AM&quot;</span>, manager);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// Handle Error conditions and save error log to a text file.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnReceiveDicosFileError(<span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a> &amp;errorlog, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_session_data.html">SDICOS::Utils::SessionData</a> &amp;sessiondata)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="comment">// Handle errors retrieving Dicos Files</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// This method is a pure virtual method and must be overridden.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">// Organize files into folders by date received</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_date.html">SDICOS::DcsDate</a> today = <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_date.html#a3c06ca9514fe7a28aef4e569763f6c7c">SDICOS::DcsDate::Today</a>();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        std::string finalLogFolder;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a>(finalLogFolder, <span class="stringliteral">&quot;%s/EL_%s&quot;</span>, m_LogFolder.c_str(), today.DcsString::Get());</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_time.html">SDICOS::DcsTime</a> t(<a class="code" href="class_s_d_i_c_o_s_1_1_dcs_time.html#aeb3fa9844e8ec25c115a37a88d9c1441">SDICOS::DcsTime::Now</a>());</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        std::string filename;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a>(filename, <span class="stringliteral">&quot;EL_%s.el&quot;</span>, t.DcsString::Get());</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_filename.html">SDICOS::Filename</a> finalLogFilename(<a class="code" href="class_s_d_i_c_o_s_1_1_folder.html">SDICOS::Folder</a>(finalLogFolder),filename);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_string.html">SDICOS::DcsString</a> logMessage;   </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">if</span>(errorlog.<a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html#ac39da96c7b1a197d2432da24ced0e2ea">WriteLog</a>(finalLogFilename))</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <a class="code" href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a>(logMessage, <span class="stringliteral">&quot;Saved Error Log to %s&quot;</span>, finalLogFilename.<a class="code" href="class_s_d_i_c_o_s_1_1_filename.html#a7fc6f6eca3f410cae015bd52007d9d3f">GetFullPath</a>().c_str());</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a>(logMessage, <span class="stringliteral">&quot;Failed to save Error Log to %s&quot;</span>, finalLogFilename.<a class="code" href="class_s_d_i_c_o_s_1_1_filename.html#a7fc6f6eca3f410cae015bd52007d9d3f">GetFullPath</a>().c_str());</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        LogReceiveDicosFile(<span class="stringliteral">&quot;OnReceiveDicosFileError&quot;</span>, logMessage.<a class="code" href="class_s_d_i_c_o_s_1_1_dcs_string.html#ab042db612f82e9cceaa420ef136e0e62">Get</a>());</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        std::stringbuf buffer;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        std::ostream os(&amp;buffer);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        os &lt;&lt; finalLogFilename.<a class="code" href="class_s_d_i_c_o_s_1_1_filename.html#a7fc6f6eca3f410cae015bd52007d9d3f">GetFullPath</a>() &lt;&lt; <span class="stringliteral">&quot; Errors Logged &quot;</span> &lt;&lt; errorlog.<a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html#af27566f00fb6fa6bf1e6cc671cfce765">NumErrors</a>() &lt;&lt; <span class="stringliteral">&quot; Warnings Logged &quot;</span> &lt;&lt; errorlog.<a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html#a42d15b8cae05acd6cb82f073842b0856">NumWarnings</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span>(errorlog.<a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html#af27566f00fb6fa6bf1e6cc671cfce765">NumErrors</a>() &gt; 0 || errorlog.<a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html#a42d15b8cae05acd6cb82f073842b0856">NumWarnings</a>() &gt; 0) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            os &lt;&lt; errorlog;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;File Error&quot;</span>, buffer.str().c_str());</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Sample method to save tag listing of received data</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> DICOS_DATA_TYPE&gt;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">bool</span> WriteTagListing(<span class="keyword">const</span> <span class="keywordtype">char</span> * modality, <a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData&lt;DICOS_DATA_TYPE&gt;</a>&amp; data)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">// Organize by modality and date received</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordtype">bool</span> bRes(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_date.html">SDICOS::DcsDate</a> today = <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_date.html#a3c06ca9514fe7a28aef4e569763f6c7c">SDICOS::DcsDate::Today</a>();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        std::string s;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a>(s, <span class="stringliteral">&quot;%s/%s_%s&quot;</span>, m_LogFolder.c_str(), modality, today.DcsString::Get());</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="class_s_d_i_c_o_s_1_1_folder.html">SDICOS::Folder</a> finalLogFolder(s);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="namespace_s_d_i_c_o_s.html#aaa2db0f877f825a2c8b4137b58de6286">SDICOS::FolderExists</a>(finalLogFolder) &amp;&amp; !<a class="code" href="namespace_s_d_i_c_o_s.html#a6c43f24b9fe14505de13b445e277c222">SDICOS::CreateFolder</a>(finalLogFolder,<span class="keyword">true</span>))</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            this-&gt;LogReceiveDicosFile(<span class="stringliteral">&quot;WriteTagListing failed&quot;</span>, finalLogFolder.<a class="code" href="class_s_d_i_c_o_s_1_1_folder.html#a6e57d0fd185342332dd3b016c9fc534d">GetFullFolder</a>().c_str());</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        std::string outputFile;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">for</span>(SDICOS::S_UINT32 i(0); i &lt; data.<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#acc1ed081b3148b3b361a34b91aace6c0">GetNumOriginalData</a>(); ++i)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="comment">// If there is no filename, use the date and the time the file was received along with the IP address and port</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="comment">// </span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            std::string originalFilename = data.<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#aecc1a708d9bc3f3a7df6956ac101de97">GetOriginalDataFilename</a>(i).<a class="code" href="class_s_d_i_c_o_s_1_1_filename.html#ae13475d7429564ccf12521d9f8856713">GetNameAndExtension</a>();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">if</span>(0 == originalFilename.size())</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_time.html">SDICOS::DcsTime</a> t(<a class="code" href="class_s_d_i_c_o_s_1_1_dcs_time.html#aeb3fa9844e8ec25c115a37a88d9c1441">SDICOS::DcsTime::Now</a>());</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <a class="code" href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a>(outputFile, <span class="stringliteral">&quot;%s-%s:%d(%d).txt&quot;</span>,t.DcsString::Get(), data.<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_base.html#a3d82529b257ae0031d60a3bce7841538">GetClientIP</a>().Get(), data.<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_base.html#a288d43b1277dd11b0385429e381efb08">GetServerPort</a>(),i);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                std::string originalFilename = data.<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#aecc1a708d9bc3f3a7df6956ac101de97">GetOriginalDataFilename</a>(i).<a class="code" href="class_s_d_i_c_o_s_1_1_filename.html#ade4d171b58f568781a5cd4406d492955">GetName</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <a class="code" href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a>(outputFile, <span class="stringliteral">&quot;%s(%d).txt&quot;</span>, originalFilename.c_str(),i);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="comment">// Write the tag listing and values</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <a class="code" href="class_s_d_i_c_o_s_1_1_filename.html">SDICOS::Filename</a> logFile(finalLogFolder, outputFile);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_attribute_manager.html">SDICOS::AttributeManager</a>* pAttrManager = data.<a class="code" href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#a8f66b0830ad0051f6a3fda8a81435a9f">GetOriginalData</a>(i);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span>(pAttrManager-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_attribute_manager.html#a77ff5f5c51e18ae7386321bd3f4f66f2">WriteToFileAsText</a>(logFile,<span class="keyword">true</span>,<a class="code" href="class_s_d_i_c_o_s_1_1_attribute_manager.html#a74ffa810e3a6a2e6f83139836e0104e8a4f02e912400f956f98863c6b3634b030">SDICOS::AttributeManager::enumAll</a>))</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                LogReceiveDicosFile(<span class="stringliteral">&quot;WriteTagListing succeeded&quot;</span>, logFile.<a class="code" href="class_s_d_i_c_o_s_1_1_filename.html#a7fc6f6eca3f410cae015bd52007d9d3f">GetFullPath</a>().c_str());</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                LogReceiveDicosFile(<span class="stringliteral">&quot;WriteTagListing failed&quot;</span>, logFile.<a class="code" href="class_s_d_i_c_o_s_1_1_filename.html#a7fc6f6eca3f410cae015bd52007d9d3f">GetFullPath</a>().c_str());</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                bRes = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> bRes;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">void</span> LogReceiveDicosFile(<span class="keyword">const</span> <span class="keywordtype">char</span> * source, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_dcs_string.html">SDICOS::DcsString</a>&amp; message, <span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a>&amp; el)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        openlog(<span class="stringliteral">&quot;HostDaemonExample&quot;</span>, LOG_CONS|LOG_PID, LOG_DAEMON);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">if</span>(el.<a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html#af27566f00fb6fa6bf1e6cc671cfce765">NumErrors</a>() &gt; 0) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            std::stringbuf buffer;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            std::ostream os(&amp;buffer);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            os &lt;&lt; el&lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            syslog(LOG_NOTICE|LOG_DAEMON, <span class="stringliteral">&quot;received dicos data Source: %s. Message: %s Errors: %s&quot;</span>, source, message.<a class="code" href="class_s_d_i_c_o_s_1_1_dcs_string.html#ab042db612f82e9cceaa420ef136e0e62">Get</a>(), buffer.str().c_str());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            syslog(LOG_NOTICE|LOG_DAEMON, <span class="stringliteral">&quot;received dicos data Source: %s. Message: %s No Errors.&quot;</span>, source, message.<a class="code" href="class_s_d_i_c_o_s_1_1_dcs_string.html#ab042db612f82e9cceaa420ef136e0e62">Get</a>());</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        closelog();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">if</span>(el.<a class="code" href="class_s_d_i_c_o_s_1_1_error_log.html#af27566f00fb6fa6bf1e6cc671cfce765">NumErrors</a>() &gt; 0) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            std::stringbuf buffer;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            std::ostream os(&amp;buffer);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            os &lt;&lt; el&lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;received dicos data Source: &quot;</span> &lt;&lt; source &lt;&lt; <span class="stringliteral">&quot; Message: &quot;</span> &lt;&lt; message.<a class="code" href="class_s_d_i_c_o_s_1_1_dcs_string.html#ab042db612f82e9cceaa420ef136e0e62">Get</a>() &lt;&lt; <span class="stringliteral">&quot; Errors: &quot;</span> &lt;&lt; buffer.str().c_str() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;received dicos data Source: &quot;</span> &lt;&lt; source &lt;&lt; <span class="stringliteral">&quot; Message: &quot;</span> &lt;&lt; message.<a class="code" href="class_s_d_i_c_o_s_1_1_dcs_string.html#ab042db612f82e9cceaa420ef136e0e62">Get</a>() &lt;&lt; <span class="stringliteral">&quot; No Errors&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">void</span> LogReceiveDicosFile(<span class="keyword">const</span> <span class="keywordtype">char</span> * source, <span class="keyword">const</span> <span class="keywordtype">char</span> * message)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        openlog(<span class="stringliteral">&quot;HostDaemonExample&quot;</span>, LOG_CONS|LOG_PID, LOG_DAEMON);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        syslog(LOG_NOTICE|LOG_DAEMON, <span class="stringliteral">&quot;received dicos data Source: %s. Message: %s&quot;</span>, source, message);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        closelog();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;received dicos data Source: &quot;</span> &lt;&lt; source &lt;&lt; <span class="stringliteral">&quot; Message: &quot;</span> &lt;&lt; message &lt;&lt; std::endl;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordtype">void</span> ProcessCTDataOnAnotherThread(<span class="keyword">const</span> <a class="code" href="class_s_d_i_c_o_s_1_1_c_t.html">SDICOS::CT</a>* pCT)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="comment">// Stub method for processing CT Data</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="comment">// Callback handler is now responsible for deleting DICOS data</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keyword">delete</span> pCT;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Location on file system where files received logs are written</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    std::string m_LogFolder;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;};</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;} <span class="comment">// namespace HostDaemonExample</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a64d28f49232d9fada3edd46309ab6830">PrintUsage</a>();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="_host_2_host_daemon_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">  386</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; argc; ++i) {<span class="keywordflow">if</span>(0 == strcmp(<span class="stringliteral">&quot;-help&quot;</span>, argv[i]) || </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          (0 == strcmp(<span class="stringliteral">&quot;--help&quot;</span>, argv[i])) ||</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          (0 == strcmp(<span class="stringliteral">&quot;/H&quot;</span>, argv[i]))</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        ) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a64d28f49232d9fada3edd46309ab6830">PrintUsage</a>();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            exit(<a class="code" href="_host_2_host_daemon_2main_8cpp.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">/* Parse command line args for port and IP address */</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> * ip(NULL);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    SDICOS::S_INT32 port(0);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; argc; ++i) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span>(0 == strcmp(<span class="stringliteral">&quot;-ip&quot;</span>, argv[i])) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">if</span>(argc &gt; (i+1)) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                ip = argv[i+1];</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0 == strcmp(<span class="stringliteral">&quot;-port&quot;</span>, argv[i])) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="keywordflow">if</span>(argc &gt; (i+1)) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                port = atoi(argv[i+1]);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordtype">int</span> numErrors = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span>(NULL == ip) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;IP Address for listening must be specified.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        ++numErrors;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span>(port &lt;= 0) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;Port for listening cannot be &lt;= 0&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        ++numErrors;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span>(numErrors) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a64d28f49232d9fada3edd46309ab6830">PrintUsage</a>();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">        Unix specific code to fork a process and run as daemon.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">#ifndef WIN32</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    pid_t pid;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">/* Fork off the parent process */</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    pid = fork();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (pid &lt; 0) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to fork child process for daemon.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        openlog(<span class="stringliteral">&quot;DcsHostDaemon&quot;</span>, LOG_CONS|LOG_PID, LOG_DAEMON);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        syslog(LOG_ERR|LOG_DAEMON, <span class="stringliteral">&quot;Failed to fork child process for daemon. Exiting with code %d.&quot;</span>, <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        exit(<a class="code" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">/* If we got a good PID, then we can exit the parent process. */</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (pid &gt; 0) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;Forked Child process and exiting parent process. PID &quot;</span> &lt;&lt; pid &lt;&lt; std::endl;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        openlog(<span class="stringliteral">&quot;DcsHostDaemon&quot;</span>, LOG_CONS|LOG_PID, LOG_DAEMON);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        syslog(LOG_NOTICE|LOG_DAEMON, <span class="stringliteral">&quot;Successfully forked child process for daemon. PID %d&quot;</span>, pid);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        exit(<a class="code" href="_host_2_host_daemon_2main_8cpp.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">        Change the file mode mask for logging.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    umask(0);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    pid_t sid = setsid();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span>(sid &lt; 0) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        openlog(<span class="stringliteral">&quot;DcsHostDaemon&quot;</span>, LOG_CONS|LOG_PID, LOG_DAEMON);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        syslog(LOG_ERR|LOG_DAEMON, <span class="stringliteral">&quot;Failed to create system idf for child process. Exiting with code %d.&quot;</span>, <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        exit(<a class="code" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    openlog(<span class="stringliteral">&quot;DcsHostDaemon&quot;</span>, LOG_CONS|LOG_PID, LOG_DAEMON);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    syslog(LOG_NOTICE|LOG_DAEMON, <span class="stringliteral">&quot;Successfully created sid for child process. SID %d&quot;</span>, sid);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;Created SID for child process &quot;</span> &lt;&lt; sid &lt;&lt; std::endl;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">        Change working directory to /</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> ((chdir(<span class="stringliteral">&quot;/&quot;</span>)) &lt; 0) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">/* Log any failure here */</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        openlog(<span class="stringliteral">&quot;DcsHostDaemon&quot;</span>, LOG_CONS|LOG_PID, LOG_DAEMON);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        syslog(LOG_ERR|LOG_DAEMON, <span class="stringliteral">&quot;Failed to change directory to &#39;/&#39;. Exiting with code %d.&quot;</span>, <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        exit(<a class="code" href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    std::cerr &lt;&lt; <span class="stringliteral">&quot;Closing standard file descriptors for daemon process.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">/* Close out the standard file descriptors */</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    close(STDIN_FILENO);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    close(STDOUT_FILENO);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    close(STDERR_FILENO);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// Place any windows code here necessary to create a service.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html">SDICOS::Network::DcsServer</a> server;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    HostDaemonExample::DICOSCallbackHandler handler;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">bool</span> bRes(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment"></span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">    /// Server application name that Client connects to. Must by of type SDICOS.DcsApplicationEntity.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">    /// This parameter corresponds to the Destination Application name property in the SDICOS.Network.DcsClient class</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">    /// and is parameter to the SendOverNetwork() method in the User-Level API objects. e.g. SDICOS.CT.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span>    bRes = server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a070fd42e3ab8a496223e5a0ff4899ff9">SetApplicationName</a>(<span class="stringliteral">&quot;ExampleHost&quot;</span>) &amp;&amp; bRes;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    bRes = server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a8594d5606f3fa7839b91a6cc0f545dc0">SetIP</a>(ip) &amp;&amp; bRes;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    bRes = server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#ad56a76446f6552d83443754e40a0a36c">SetPort</a>(port) &amp;&amp; bRes;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// The maximum number of milliseconds to wait on a socket read operation while no additional data is forthcoming.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// The maximum number of milliseconds to wait for the socket to become writeable on a socket write operation. </span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// To wait indefinitely set value to 0. Default is 1000ms.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    bRes = server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#ac69ba772849af624a640f8666681d602">SetReadTimeoutInMilliseconds</a>(500) &amp;&amp; bRes;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    bRes = server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a071b644591cd2d5ca99367a6f82e5574">SetWriteTimeoutInMilliseconds</a>(500) &amp;&amp; bRes;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">    ///////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span>    <span class="comment">// Two functions for configuring if compression is allowed to be sent from clients.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// Although both are used below for demonstration purposes, choose one of them.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">// By default, the server prioritizes data compression.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">//Refuse connection if client can only send compressed data</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a7e32e8b8576bae62939bf8623b74036e">DisableDataCompression</a>();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">//True = Prefer clients to send compressed data.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">//False = Prefer clients to send uncompressed data, but still accept compressed data.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#af93fbd9c13c6340cfae46024f53a2bf2">PrioritizeDataCompression</a>(<span class="keyword">false</span>);<span class="comment"></span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">    ///////////////////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">    /// This call creates a thread that listens for connections and routes them to the User API callbacks</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span>    <span class="comment"></span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">    /// Accept connections from all source application names to all destination application names.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">    /// The Source Application Name and Destination Application Name are members of the SDICOS.Network.DcsClient class.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">    /// They are also passed as parameters to the SendOverNetwork() call in the User-Level API objects. e.g. SDICOS.CT, SDICOS.AIT3D etc.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span>    server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a59461ec0fc6898866df29c84f11be10b">IgnoreApplicationNames</a>();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">// Start listening for DICOS data using the specified handler and calling the User-Level API methods.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    bRes = server.<a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a5d856ec60ae14563db62b38990f487e8">StartListening</a>(handler, NULL, <a class="code" href="class_s_d_i_c_o_s_1_1_network_1_1_i_dcs_server.html#a5d3550a5b877bfe360dd18fe68f2819fac7a1e6ffdf1668524379700242cecb18">SDICOS::Network::DcsServer::enumMethodUserAPI</a>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">while</span>(1) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="comment">// Put custom server code here</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="namespace_s_d_i_c_o_s.html#a90ed27bcf5dfc4dda72fda0841fbcc71">SDICOS::SleepTime</a>(10000);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="_host_2_host_daemon_2main_8cpp.html#a64d28f49232d9fada3edd46309ab6830">  539</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_host_2_host_daemon_2main_8cpp.html#a64d28f49232d9fada3edd46309ab6830">PrintUsage</a>()</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;{</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    printf(<span class="stringliteral">&quot;The DcsHostDaemon listens for connections to a DcsHost on a specific port.\n&quot;</span>);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    printf(<span class="stringliteral">&quot;options: [-ip,-port]\n&quot;</span>);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    printf(<span class="stringliteral">&quot;-ip IP. IP Address to listen on for connections. -ip 123.123.123.123\n&quot;</span>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    printf(<span class="stringliteral">&quot;-port Port. Port to listen on for connections. -port 1234\n&quot;</span>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    printf(<span class="stringliteral">&quot;Example: HostDaemon -ip 123.234.345.456 -port 2000\n&quot;</span>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_a070fd42e3ab8a496223e5a0ff4899ff9"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a070fd42e3ab8a496223e5a0ff4899ff9">SDICOS::Network::DcsServer::SetApplicationName</a></div><div class="ttdeci">bool SetApplicationName(const DcsApplicationEntity &amp;ae)</div><div class="ttdoc">Set application name (i.e.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_filename_html_ae13475d7429564ccf12521d9f8856713"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_filename.html#ae13475d7429564ccf12521d9f8856713">SDICOS::Filename::GetNameAndExtension</a></div><div class="ttdeci">std::string GetNameAndExtension() const</div><div class="ttdoc">For the windows file &quot;c:\folder\subfolder\file.txt&quot;, Name() returns &quot;file.txt&quot; For the mac file &quot;/fol...</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_i_dcs_server_html_a5d3550a5b877bfe360dd18fe68f2819fac7a1e6ffdf1668524379700242cecb18"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_i_dcs_server.html#a5d3550a5b877bfe360dd18fe68f2819fac7a1e6ffdf1668524379700242cecb18">SDICOS::Network::IDcsServer::enumMethodUserAPI</a></div><div class="ttdeci">@ enumMethodUserAPI</div><div class="ttdoc">[Default] Always uses user-level API specific OnReceiveDicosFile() for known modalities</div><div class="ttdef"><b>Definition:</b> <a href="_i_host_8h_source.html#l00070">IHost.h:70</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_attribute_manager_html_a74ffa810e3a6a2e6f83139836e0104e8a4f02e912400f956f98863c6b3634b030"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_attribute_manager.html#a74ffa810e3a6a2e6f83139836e0104e8a4f02e912400f956f98863c6b3634b030">SDICOS::AttributeManager::enumAll</a></div><div class="ttdeci">@ enumAll</div><div class="ttdoc">All attributes.</div><div class="ttdef"><b>Definition:</b> <a href="_attribute_8h_source.html#l03050">Attribute.h:3050</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_c_t_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_c_t.html">SDICOS::CT</a></div><div class="ttdoc">Represents a single CT scan with original pixel data.</div><div class="ttdef"><b>Definition:</b> <a href="_user_c_t_8h_source.html#l00196">UserCT.h:202</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_i_receive_callback_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_i_receive_callback.html">SDICOS::Network::IReceiveCallback</a></div><div class="ttdoc">Interface for callback functions used by DcsClient and DcsServer. Each function is a blocking call fo...</div><div class="ttdef"><b>Definition:</b> <a href="_i_receive_callback_8h_source.html#l00053">IReceiveCallback.h:54</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_linked_list_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_linked_list.html">SDICOS::LinkedList</a></div><div class="ttdef"><b>Definition:</b> <a href="_tools_light_8h_source.html#l00383">ToolsLight.h:384</a></div></div>
<div class="ttc" id="a_host_2_host_daemon_2main_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="_host_2_host_daemon_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="_host_2_host_daemon_2main_8cpp_source.html#l00386">Host/HostDaemon/main.cpp:386</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_error_log_html_ac39da96c7b1a197d2432da24ced0e2ea"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_error_log.html#ac39da96c7b1a197d2432da24ced0e2ea">SDICOS::ErrorLog::WriteLog</a></div><div class="ttdeci">bool WriteLog(const Filename &amp;filename) const</div><div class="ttdoc">Write errors and warnings to file as text.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_dcs_time_html_aeb3fa9844e8ec25c115a37a88d9c1441"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_dcs_time.html#aeb3fa9844e8ec25c115a37a88d9c1441">SDICOS::DcsTime::Now</a></div><div class="ttdeci">static DcsTime Now()</div><div class="ttdoc">Create a DcsTime object set to the current time.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_error_log_html_af27566f00fb6fa6bf1e6cc671cfce765"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_error_log.html#af27566f00fb6fa6bf1e6cc671cfce765">SDICOS::ErrorLog::NumErrors</a></div><div class="ttdeci">S_UINT32 NumErrors() const</div><div class="ttdoc">Return number of errors.</div></div>
<div class="ttc" id="anamespace_s_d_i_c_o_s_html_a6c43f24b9fe14505de13b445e277c222"><div class="ttname"><a href="namespace_s_d_i_c_o_s.html#a6c43f24b9fe14505de13b445e277c222">SDICOS::CreateFolder</a></div><div class="ttdeci">bool CreateFolder(const Folder &amp;folder, bool bParentToo=true)</div><div class="ttdoc">Creates the folder.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_attribute_manager_html_a77ff5f5c51e18ae7386321bd3f4f66f2"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_attribute_manager.html#a77ff5f5c51e18ae7386321bd3f4f66f2">SDICOS::AttributeManager::WriteToFileAsText</a></div><div class="ttdeci">bool WriteToFileAsText(const Filename &amp;filename, const bool bWriteData=true, const SEARCHEDATTRIB nfilter=enumAll) const</div><div class="ttdoc">Write a listing of all the attributes as text to file.</div></div>
<div class="ttc" id="anamespace_s_d_i_c_o_s_html_ac1e44ceb1c6d73254789f74a2bb0a8da"><div class="ttname"><a href="namespace_s_d_i_c_o_s.html#ac1e44ceb1c6d73254789f74a2bb0a8da">SDICOS::Format</a></div><div class="ttdeci">int Format(DcsString &amp;strResult, const char *strFormat,...)</div><div class="ttdoc">Format a std::string in a similar manner as sprintf.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_folder_html_a6e57d0fd185342332dd3b016c9fc534d"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_folder.html#a6e57d0fd185342332dd3b016c9fc534d">SDICOS::Folder::GetFullFolder</a></div><div class="ttdeci">std::string GetFullFolder() const</div><div class="ttdoc">For the windows folder &quot;c:\folder\subfolder&quot;, GetFullFolder() returns &quot;c:\folder\subfolder\&quot;,...</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html">SDICOS::Network::DcsServer</a></div><div class="ttdoc">The DICOS server uses the DICOM protocol for receiving data over a TCP/IP connection.</div><div class="ttdef"><b>Definition:</b> <a href="_host_8h_source.html#l00053">Host.h:54</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_html_acc1ed081b3148b3b361a34b91aace6c0"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#acc1ed081b3148b3b361a34b91aace6c0">SDICOS::Utils::DicosData::GetNumOriginalData</a></div><div class="ttdeci">S_UINT32 GetNumOriginalData() const</div><div class="ttdoc">Get number of attribute manager holding original data.</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8h_source.html#l00390">Utils.h:390</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_html_aecc1a708d9bc3f3a7df6956ac101de97"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#aecc1a708d9bc3f3a7df6956ac101de97">SDICOS::Utils::DicosData::GetOriginalDataFilename</a></div><div class="ttdeci">SDICOS::Filename GetOriginalDataFilename(const S_UINT32 n) const</div><div class="ttdoc">Get original data's file name.</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8h_source.html#l00405">Utils.h:405</a></div></div>
<div class="ttc" id="a_host_2_host_daemon_2main_8cpp_html_a73efe787c131b385070f25d18b7c9aa4"><div class="ttname"><a href="_host_2_host_daemon_2main_8cpp.html#a73efe787c131b385070f25d18b7c9aa4">EXIT_FAILURE</a></div><div class="ttdeci">#define EXIT_FAILURE</div><div class="ttdoc">Stratovan Corporation Copyright and Disclaimer Notice:</div><div class="ttdef"><b>Definition:</b> <a href="_host_2_host_daemon_2main_8cpp_source.html#l00055">Host/HostDaemon/main.cpp:54</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_error_log_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_error_log.html">SDICOS::ErrorLog</a></div><div class="ttdoc">Implements ErrorLog.</div><div class="ttdef"><b>Definition:</b> <a href="_error_log_8h_source.html#l00054">ErrorLog.h:55</a></div></div>
<div class="ttc" id="a_d_i_c_o_s_8h_html"><div class="ttname"><a href="_d_i_c_o_s_8h.html">DICOS.h</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_a071b644591cd2d5ca99367a6f82e5574"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a071b644591cd2d5ca99367a6f82e5574">SDICOS::Network::DcsServer::SetWriteTimeoutInMilliseconds</a></div><div class="ttdeci">bool SetWriteTimeoutInMilliseconds(const S_UINT32 nTimeoutMilliseconds=1000)</div><div class="ttdoc">Set timeout for receiving and sending data. Default is 1000 ms.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_a8594d5606f3fa7839b91a6cc0f545dc0"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a8594d5606f3fa7839b91a6cc0f545dc0">SDICOS::Network::DcsServer::SetIP</a></div><div class="ttdeci">bool SetIP(const DcsString &amp;ds)</div><div class="ttdoc">Set the server's IP address.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_error_log_html_a42d15b8cae05acd6cb82f073842b0856"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_error_log.html#a42d15b8cae05acd6cb82f073842b0856">SDICOS::ErrorLog::NumWarnings</a></div><div class="ttdeci">S_UINT32 NumWarnings() const</div><div class="ttdoc">Return the number of warnings.</div></div>
<div class="ttc" id="a_host_2_host_daemon_2main_8cpp_html_a64d28f49232d9fada3edd46309ab6830"><div class="ttname"><a href="_host_2_host_daemon_2main_8cpp.html#a64d28f49232d9fada3edd46309ab6830">PrintUsage</a></div><div class="ttdeci">void PrintUsage()</div><div class="ttdef"><b>Definition:</b> <a href="_host_2_host_daemon_2main_8cpp_source.html#l00539">Host/HostDaemon/main.cpp:539</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_attribute_manager_html_a1c8f02752c20efa9e1e3a51f2b600721"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_attribute_manager.html#a1c8f02752c20efa9e1e3a51f2b600721">SDICOS::AttributeManager::GetTransferSyntax</a></div><div class="ttdeci">DcsString GetTransferSyntax() const</div><div class="ttdoc">Returns the transfer syntax.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_dcs_date_html_a3c06ca9514fe7a28aef4e569763f6c7c"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_dcs_date.html#a3c06ca9514fe7a28aef4e569763f6c7c">SDICOS::DcsDate::Today</a></div><div class="ttdeci">static DcsDate Today()</div><div class="ttdoc">Create a DcsDate object with today's date.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_filename_html_a7fc6f6eca3f410cae015bd52007d9d3f"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_filename.html#a7fc6f6eca3f410cae015bd52007d9d3f">SDICOS::Filename::GetFullPath</a></div><div class="ttdeci">std::string GetFullPath() const</div><div class="ttdoc">For the windows file &quot;c:\folder\subfolder\file.txt&quot;, FullPath() returns &quot;c:\folder\subfolder\file....</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_dcs_time_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_dcs_time.html">SDICOS::DcsTime</a></div><div class="ttdoc">This string represents a time. The string follows the format &quot;HHMMSS.FFFFFF&quot;, where HH = Hours,...</div><div class="ttdef"><b>Definition:</b> <a href="_string_8h_source.html#l00929">String.h:930</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_html_a769e5bbaa37e937cb6bac9c789910a78"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#a769e5bbaa37e937cb6bac9c789910a78">SDICOS::Utils::DicosData::TakeOwnership</a></div><div class="ttdeci">void TakeOwnership(TYPE *&amp;pdata)</div><div class="ttdoc">Removes data ownership from this object into the parameter.</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8h_source.html#l00269">Utils.h:269</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_filename_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_filename.html">SDICOS::Filename</a></div><div class="ttdef"><b>Definition:</b> <a href="_file_system_8h_source.html#l00118">FileSystem.h:119</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_linked_list_html_ac0af6f5e99aad03e05216d26b5b84a01"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_linked_list.html#ac0af6f5e99aad03e05216d26b5b84a01">SDICOS::LinkedList::Length</a></div><div class="ttdeci">S_UINT64 Length() const</div><div class="ttdoc">Get Length of list.</div><div class="ttdef"><b>Definition:</b> <a href="_tools_light_8h_source.html#l00654">ToolsLight.h:654</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_dcs_string_html_ab042db612f82e9cceaa420ef136e0e62"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_dcs_string.html#ab042db612f82e9cceaa420ef136e0e62">SDICOS::DcsString::Get</a></div><div class="ttdeci">const char * Get() const</div><div class="ttdoc">Get the string.</div></div>
<div class="ttc" id="anamespace_s_d_i_c_o_s_html_a90ed27bcf5dfc4dda72fda0841fbcc71"><div class="ttname"><a href="namespace_s_d_i_c_o_s.html#a90ed27bcf5dfc4dda72fda0841fbcc71">SDICOS::SleepTime</a></div><div class="ttdeci">void SleepTime(unsigned int nMilliSecs)</div><div class="ttdoc">Sleep for a certain number of milliseconds.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_a59461ec0fc6898866df29c84f11be10b"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a59461ec0fc6898866df29c84f11be10b">SDICOS::Network::DcsServer::IgnoreApplicationNames</a></div><div class="ttdeci">bool IgnoreApplicationNames()</div><div class="ttdoc">Allow connections from clients with any application name.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_a5d856ec60ae14563db62b38990f487e8"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a5d856ec60ae14563db62b38990f487e8">SDICOS::Network::DcsServer::StartListening</a></div><div class="ttdeci">bool StartListening(IReceiveCallback &amp;icallback, IClientAuthenticationCallback *pIClientVerificationCallback=S_NULL, const RETRIEVE_METHOD nPreferAPI=DcsServer::enumMethodUserAPI, const bool bProcessDataOnSessionEnd=false)</div><div class="ttdoc">(Non-blocking call) Start the server to process DICOS data received by incoming client connections.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_attribute_manager_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_attribute_manager.html">SDICOS::AttributeManager</a></div><div class="ttdoc">Holds all the attributes.</div><div class="ttdef"><b>Definition:</b> <a href="_attribute_8h_source.html#l02994">Attribute.h:2995</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_ac69ba772849af624a640f8666681d602"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#ac69ba772849af624a640f8666681d602">SDICOS::Network::DcsServer::SetReadTimeoutInMilliseconds</a></div><div class="ttdeci">bool SetReadTimeoutInMilliseconds(const S_UINT32 nTimeoutMilliseconds=1000)</div><div class="ttdoc">Set timeout for receiving and sending data. Default is 1000 ms.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_dcs_date_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_dcs_date.html">SDICOS::DcsDate</a></div><div class="ttdoc">This string represents a date. The string has the format &quot;YYYYMMDD&quot;, where YYYY = Year,...</div><div class="ttdef"><b>Definition:</b> <a href="_string_8h_source.html#l00649">String.h:650</a></div></div>
<div class="ttc" id="anamespace_host_daemon_example_html"><div class="ttname"><a href="namespace_host_daemon_example.html">HostDaemonExample</a></div><div class="ttdef"><b>Definition:</b> <a href="_host_2_host_daemon_2main_8cpp_source.html#l00061">Host/HostDaemon/main.cpp:62</a></div></div>
<div class="ttc" id="a_host_2_host_daemon_2main_8cpp_html_a687984f47d8cce148d1b914d2b79612a"><div class="ttname"><a href="_host_2_host_daemon_2main_8cpp.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a></div><div class="ttdeci">#define EXIT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="_host_2_host_daemon_2main_8cpp_source.html#l00059">Host/HostDaemon/main.cpp:58</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_i_o_d_common_html_a41298db2be00a8966aa16caeb44ad488"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_i_o_d_common.html#a41298db2be00a8966aa16caeb44ad488">SDICOS::IODCommon::GetSopInstanceUID</a></div><div class="ttdeci">const DcsUniqueIdentifier &amp; GetSopInstanceUID() const</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_filename_html_ade4d171b58f568781a5cd4406d492955"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_filename.html#ade4d171b58f568781a5cd4406d492955">SDICOS::Filename::GetName</a></div><div class="ttdeci">std::string GetName() const</div><div class="ttdoc">For the windows file &quot;c:\folder\subfolder\file.txt&quot;, Name() returns &quot;file&quot; For the mac file &quot;/folder/...</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_scanner_common_html_ab7916fd0a91efe17a207a3cc89267b9d"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_scanner_common.html#ab7916fd0a91efe17a207a3cc89267b9d">SDICOS::ScannerCommon::GetSopCommon</a></div><div class="ttdeci">bool GetSopCommon(SopCommonModule &amp;sopcommon) const</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_session_data_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_session_data.html">SDICOS::Utils::SessionData</a></div><div class="ttdef"><b>Definition:</b> <a href="_utils_8h_source.html#l00439">Utils.h:440</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html">SDICOS::Utils::DicosData</a></div><div class="ttdoc">Structure for holding DICOS used in callback functions. Data can be moved out of this object.</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8h_source.html#l00182">Utils.h:183</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_folder_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_folder.html">SDICOS::Folder</a></div><div class="ttdef"><b>Definition:</b> <a href="_file_system_8h_source.html#l00062">FileSystem.h:63</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_attribute_manager_html_ab80c4e9b880ba5284b657533bb93da6d"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_attribute_manager.html#ab80c4e9b880ba5284b657533bb93da6d">SDICOS::AttributeManager::GetTagListing</a></div><div class="ttdeci">bool GetTagListing(TagList &amp;listTags, const bool bExpandSquences) const</div><div class="ttdoc">Get list of all tags in manager.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_a7e32e8b8576bae62939bf8623b74036e"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#a7e32e8b8576bae62939bf8623b74036e">SDICOS::Network::DcsServer::DisableDataCompression</a></div><div class="ttdeci">void DisableDataCompression()</div><div class="ttdoc">Disable data compression transfer syntax.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_base_html_a288d43b1277dd11b0385429e381efb08"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_base.html#a288d43b1277dd11b0385429e381efb08">SDICOS::Utils::DicosDataBase::GetServerPort</a></div><div class="ttdeci">S_UINT32 GetServerPort() const</div></div>
<div class="ttc" id="anamespace_s_d_i_c_o_s_html_aaa2db0f877f825a2c8b4137b58de6286"><div class="ttname"><a href="namespace_s_d_i_c_o_s.html#aaa2db0f877f825a2c8b4137b58de6286">SDICOS::FolderExists</a></div><div class="ttdeci">bool FolderExists(const Folder &amp;folder)</div><div class="ttdoc">Check for folder existence.</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_html_a8f66b0830ad0051f6a3fda8a81435a9f"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data.html#a8f66b0830ad0051f6a3fda8a81435a9f">SDICOS::Utils::DicosData::GetOriginalData</a></div><div class="ttdeci">const SDICOS::AttributeManager * GetOriginalData() const</div><div class="ttdoc">Get pointer to original data.</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8h_source.html#l00381">Utils.h:381</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_dcs_string_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_dcs_string.html">SDICOS::DcsString</a></div><div class="ttdoc">String class for char or wide char.</div><div class="ttdef"><b>Definition:</b> <a href="_string_8h_source.html#l00047">String.h:48</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_base_html_a3d82529b257ae0031d60a3bce7841538"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_utils_1_1_dicos_data_base.html#a3d82529b257ae0031d60a3bce7841538">SDICOS::Utils::DicosDataBase::GetClientIP</a></div><div class="ttdeci">const DcsString &amp; GetClientIP() const</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_af93fbd9c13c6340cfae46024f53a2bf2"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#af93fbd9c13c6340cfae46024f53a2bf2">SDICOS::Network::DcsServer::PrioritizeDataCompression</a></div><div class="ttdeci">void PrioritizeDataCompression(const bool bPrioritize)</div><div class="ttdoc">Set parameter to true to prioritize using compression transfer syntaxes for data transfers between th...</div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_network_1_1_dcs_server_html_ad56a76446f6552d83443754e40a0a36c"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_network_1_1_dcs_server.html#ad56a76446f6552d83443754e40a0a36c">SDICOS::Network::DcsServer::SetPort</a></div><div class="ttdeci">bool SetPort(const S_INT32 nPort)</div><div class="ttdoc">Set listening port.</div></div>
<!--
Stratovan Corporation Copyright and Disclaimer Notice:
Copyright (c) 2014 Stratovan Corporation. All Rights Reserved.
Permission to use, copy, modify, and distribute this software and its
documentation without a signed licensing agreement, is hereby granted,
provided that this copyright notice, this paragraph and the following two
paragraphs appear in all copies, modifications, and distributions.
IN NO EVENT SHALL STRATOVAN BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
STRATOVAN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
STRATOVAN SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED
TO, THE IMPLIED WARRANTIES OF USE AND FITNESS FOR A PARTICULAR PURPOSE. THE
SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED HEREUNDER IS
PROVIDED "AS IS". STRATOVAN HAS NO OBLIGATION TO PROVIDE MAINTENANCE,
SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS UNLESS DIRECTED BY THE
U.S. GOVERNMENT'S TRANSPORTATION SECURITY ADMINISTRATION (TSA).
-->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
    <center>Copyright (c) 2014 by Stratovan Corporation</br>
    Generated on Mon Sep 25 2023 00:04:55 for Stratovan DICOS Toolkit Class Interfaces and Architecture by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18</center>
</small></address>
</body>
</html>
