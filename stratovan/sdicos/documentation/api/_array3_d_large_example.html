<!--
Stratovan Corporation Copyright and Disclaimer Notice:
Copyright (c) 2014 Stratovan Corporation. All Rights Reserved.
Permission to use, copy, modify, and distribute this software and its
documentation without a signed licensing agreement, is hereby granted,
provided that this copyright notice, this paragraph and the following two
paragraphs appear in all copies, modifications, and distributions.
IN NO EVENT SHALL STRATOVAN BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
STRATOVAN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
STRATOVAN SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED
TO, THE IMPLIED WARRANTIES OF USE AND FITNESS FOR A PARTICULAR PURPOSE. THE
SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED HEREUNDER IS
PROVIDED "AS IS". STRATOVAN HAS NO OBLIGATION TO PROVIDE MAINTENANCE,
SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS UNLESS DIRECTED BY THE
U.S. GOVERNMENT'S TRANSPORTATION SECURITY ADMINISTRATION (TSA).
-->
<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stratovan DICOS Toolkit Class Interfaces and Architecture: Using Array3DLarge to store Volume Data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="DICOS.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DICOS_TOOLKIT_x120.png"/>
     <div id="projectbrief">Stratovan implementation of DICOS v03 specification</div>
   &#160;<span id="projectnumber">Mon Sep 25 2023</span>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using Array3DLarge to store Volume Data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Array3DLargeExample_sec"></a>
Using SDICOS::Array3DLarge to store Volume Data</h1>
<div class="fragment"><div class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// Stratovan Corporation Copyright and Disclaimer Notice:</span></div>
<div class="line"><span class="comment"></span><span class="comment">///</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// Copyright (c) 2014 Stratovan Corporation. All Rights Reserved.</span></div>
<div class="line"><span class="comment"></span><span class="comment">///</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// Permission to use, copy, modify, and distribute this software and its</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// documentation without a signed licensing agreement, is hereby granted,</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// provided that this copyright notice, this paragraph and the following two</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// paragraphs appear in all copies, modifications, and distributions.</span></div>
<div class="line"><span class="comment"></span><span class="comment">///</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// IN NO EVENT SHALL STRATOVAN BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// STRATOVAN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment"></span><span class="comment">///</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// STRATOVAN SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// TO, THE IMPLIED WARRANTIES OF USE AND FITNESS FOR A PARTICULAR PURPOSE. THE</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED HEREUNDER IS</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// PROVIDED &quot;AS IS&quot;. STRATOVAN HAS NO OBLIGATION TO PROVIDE MAINTENANCE,</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS UNLESS DIRECTED BY THE</span></div>
<div class="line"><span class="comment"></span><span class="comment">/// U.S. GOVERNMENT&#39;S TRANSPORTATION SECURITY ADMINISTRATION (TSA).</span></div>
<div class="line"><span class="comment"></span><span class="comment">///</span></div>
<div class="line"><span class="comment"></span><span class="comment">//////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_d_i_c_o_s_8h.html">SDICOS/DICOS.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// StartAccessingArray3DLargeData</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="_volume_2_array3_d_large_2main_8cpp.html#a6d4c861944c8464791572ef6a22b2c67">AccessingArray3DLargeData</a>();</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="_client_2_c-_echo_2main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="_volume_2_array3_d_large_2main_8cpp.html#a6d4c861944c8464791572ef6a22b2c67">AccessingArray3DLargeData</a>())</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Successfully stored and retrieved data using the Array3DLarge class&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    } </div>
<div class="line">    <span class="keywordflow">else</span> </div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to store and retrieve data using the Array3DLarge class&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Sample code for setting and accessing data stored in 3-D arrays.</span></div>
<div class="line"><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><span class="comment">/// \section Array3DLarge_ex1 Using the Array3DLarge class to set and get volume data using 2D slices.</span></div>
<div class="line"><span class="comment">/// Accessing 3D data in the Array3DLarge class.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="_volume_2_array3_d_large_2main_8cpp.html#a6d4c861944c8464791572ef6a22b2c67">AccessingArray3DLargeData</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> bRes(<span class="keyword">true</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// &lt;b&gt;The SDICOS::Array3DLarge&lt;/b&gt; class stores 3D Data for CT, DX, AIT etc.</span></div>
<div class="line">    <span class="comment">// Internally it is implemented as a 1-D array of 2-D arrays so (X,Y) slices are contiguous blocks of memory.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="class_s_d_i_c_o_s_1_1_array3_d_large.html">SDICOS::Array3DLarge&lt;SDICOS::S_UINT16&gt;</a> vnVolume;</div>
<div class="line">    SDICOS::S_UINT32 width(128),height(128),depth(100);</div>
<div class="line">    vnVolume.<a class="code" href="class_s_d_i_c_o_s_1_1_array3_d_large.html#a6ec71fc4e82d86133948742fd923ce45">SetSize</a>(width,height,depth);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// The 3D array of CT data can be set in multiple ways</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 1: Accessing the array using 3-D indices.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    SDICOS::S_UINT32 z;</div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 h = 0; h &lt; height; ++h)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 w = 0; w &lt; width; ++w)</div>
<div class="line">        vnVolume[z][h][w] = (z+h+w);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 2: Accessing the data one plane at a time</span></div>
<div class="line">    <span class="comment">// Note that the 3D memory is not a contiguous block. Slices are contiguous blocks.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="class_s_d_i_c_o_s_1_1_array2_d.html">SDICOS::Array2D&lt;SDICOS::S_UINT16&gt;</a> &amp;zPlane = vnVolume[z];</div>
<div class="line">        <span class="keywordflow">for</span>(SDICOS::S_UINT32 h = 0; h &lt; height; ++h)</div>
<div class="line">        <span class="keywordflow">for</span>(SDICOS::S_UINT32 w = 0; w &lt; width; ++w) {</div>
<div class="line">            <span class="keywordflow">if</span>((z+h+w) != zPlane[h][w]) {</div>
<div class="line">                bRes = <span class="keyword">false</span>;</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Error writing/reading volume data &quot;</span> &lt;&lt; zPlane[h][w] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; (z+h+w) &lt;&lt; std::endl;</div>
<div class="line">            }</div>
<div class="line">            zPlane[h][w] = (z+h+w); <span class="comment">// If needed convert raw data to SDICOS::S_UINT16 cConvertData&lt;type&gt;(val);</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 3: Access data explicitly as 2D planes</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// The 3D volume is implemented as an array of 2D slices</span></div>
<div class="line">    <span class="comment">// GetSlice() returns a pointer to an Array2D that stores a contiguous block </span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="class_s_d_i_c_o_s_1_1_array2_d.html">SDICOS::Array2D&lt;SDICOS::S_UINT16&gt;</a> * volSlice = vnVolume.<a class="code" href="class_s_d_i_c_o_s_1_1_array3_d_large.html#a12e7dede4eaa1a9973cd6949d035b679">GetSlice</a>(z);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// one-dimensional array that holds a plane of width*height dimensions</span></div>
<div class="line">        SDICOS::S_UINT16 * currentSlice = volSlice-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_array2_d.html#adccd8453c3af157553cab831e25346bf">GetBuffer</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Set data for a single slice as if it is a 1-D array.</span></div>
<div class="line">        <span class="keywordflow">for</span>(SDICOS::S_UINT32 i = 0; i &lt; (width*height); ++i) {</div>
<div class="line">            SDICOS::S_UINT16 value = z + (i/width) + (i%width);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span>(currentSlice[i] != value) {</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Error writing/reading volume data &quot;</span> &lt;&lt; currentSlice[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</div>
<div class="line">                bRes = <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            currentSlice[i] = z+i;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 4: Copy data directly into the raw buffers of the array.</span></div>
<div class="line">    <span class="comment">// Requires caller to setup data buffers in the correct format</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Pointer to user data for a XY slice.</span></div>
<div class="line">    <span class="comment">// This is for example purposes only.</span></div>
<div class="line">    SDICOS::S_UINT16 * userDataForSlice = <span class="keyword">new</span> SDICOS::S_UINT16[width*height];</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 i = 0; i &lt; (width*height); ++i) </div>
<div class="line">        userDataForSlice[i] = SDICOS::S_UINT16(i);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// point to data buffer for Array2D object</span></div>
<div class="line">        SDICOS::S_UINT16 * destSlice = vnVolume[z].<a class="code" href="class_s_d_i_c_o_s_1_1_array1_d.html#a9014e01edd68fd0d5c611364aa51200d">GetBuffer</a>();</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Copy user data into the volume slice.</span></div>
<div class="line">        <span class="comment">// Alternatively, the user can </span></div>
<div class="line">        memcpy(destSlice, userDataForSlice, width*height*<span class="keyword">sizeof</span>(SDICOS::S_UINT16));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">delete</span> [] userDataForSlice;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Verify data </span></div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 h = 0; h &lt; height; ++h)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 w = 0; w &lt; width; ++w)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(vnVolume[z][h][w] != SDICOS::S_UINT16(h*width+w))</div>
<div class="line">            bRes = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> bRes;</div>
<div class="line">} <span class="comment">// EndAccessingArray3DLargeData</span></div>
</div><!-- fragment --><p> Sample code to access data using Array3DLarge class</p>
<div class="fragment"><div class="line"><span class="comment">// StartAccessingArray3DLargeData</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="_volume_2_array3_d_large_2main_8cpp.html#a6d4c861944c8464791572ef6a22b2c67">AccessingArray3DLargeData</a>();</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="_client_2_c-_echo_2main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="_volume_2_array3_d_large_2main_8cpp.html#a6d4c861944c8464791572ef6a22b2c67">AccessingArray3DLargeData</a>())</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Successfully stored and retrieved data using the Array3DLarge class&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    } </div>
<div class="line">    <span class="keywordflow">else</span> </div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to store and retrieve data using the Array3DLarge class&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Sample code for setting and accessing data stored in 3-D arrays.</span></div>
<div class="line"><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><span class="comment">/// \section Array3DLarge_ex1 Using the Array3DLarge class to set and get volume data using 2D slices.</span></div>
<div class="line"><span class="comment">/// Accessing 3D data in the Array3DLarge class.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="_volume_2_array3_d_large_2main_8cpp.html#a6d4c861944c8464791572ef6a22b2c67">AccessingArray3DLargeData</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> bRes(<span class="keyword">true</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// &lt;b&gt;The SDICOS::Array3DLarge&lt;/b&gt; class stores 3D Data for CT, DX, AIT etc.</span></div>
<div class="line">    <span class="comment">// Internally it is implemented as a 1-D array of 2-D arrays so (X,Y) slices are contiguous blocks of memory.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="class_s_d_i_c_o_s_1_1_array3_d_large.html">SDICOS::Array3DLarge&lt;SDICOS::S_UINT16&gt;</a> vnVolume;</div>
<div class="line">    SDICOS::S_UINT32 width(128),height(128),depth(100);</div>
<div class="line">    vnVolume.<a class="code" href="class_s_d_i_c_o_s_1_1_array3_d_large.html#a6ec71fc4e82d86133948742fd923ce45">SetSize</a>(width,height,depth);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// The 3D array of CT data can be set in multiple ways</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 1: Accessing the array using 3-D indices.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    SDICOS::S_UINT32 z;</div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 h = 0; h &lt; height; ++h)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 w = 0; w &lt; width; ++w)</div>
<div class="line">        vnVolume[z][h][w] = (z+h+w);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 2: Accessing the data one plane at a time</span></div>
<div class="line">    <span class="comment">// Note that the 3D memory is not a contiguous block. Slices are contiguous blocks.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="class_s_d_i_c_o_s_1_1_array2_d.html">SDICOS::Array2D&lt;SDICOS::S_UINT16&gt;</a> &amp;zPlane = vnVolume[z];</div>
<div class="line">        <span class="keywordflow">for</span>(SDICOS::S_UINT32 h = 0; h &lt; height; ++h)</div>
<div class="line">        <span class="keywordflow">for</span>(SDICOS::S_UINT32 w = 0; w &lt; width; ++w) {</div>
<div class="line">            <span class="keywordflow">if</span>((z+h+w) != zPlane[h][w]) {</div>
<div class="line">                bRes = <span class="keyword">false</span>;</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Error writing/reading volume data &quot;</span> &lt;&lt; zPlane[h][w] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; (z+h+w) &lt;&lt; std::endl;</div>
<div class="line">            }</div>
<div class="line">            zPlane[h][w] = (z+h+w); <span class="comment">// If needed convert raw data to SDICOS::S_UINT16 cConvertData&lt;type&gt;(val);</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 3: Access data explicitly as 2D planes</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// The 3D volume is implemented as an array of 2D slices</span></div>
<div class="line">    <span class="comment">// GetSlice() returns a pointer to an Array2D that stores a contiguous block </span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="class_s_d_i_c_o_s_1_1_array2_d.html">SDICOS::Array2D&lt;SDICOS::S_UINT16&gt;</a> * volSlice = vnVolume.<a class="code" href="class_s_d_i_c_o_s_1_1_array3_d_large.html#a12e7dede4eaa1a9973cd6949d035b679">GetSlice</a>(z);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// one-dimensional array that holds a plane of width*height dimensions</span></div>
<div class="line">        SDICOS::S_UINT16 * currentSlice = volSlice-&gt;<a class="code" href="class_s_d_i_c_o_s_1_1_array2_d.html#adccd8453c3af157553cab831e25346bf">GetBuffer</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Set data for a single slice as if it is a 1-D array.</span></div>
<div class="line">        <span class="keywordflow">for</span>(SDICOS::S_UINT32 i = 0; i &lt; (width*height); ++i) {</div>
<div class="line">            SDICOS::S_UINT16 value = z + (i/width) + (i%width);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span>(currentSlice[i] != value) {</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Error writing/reading volume data &quot;</span> &lt;&lt; currentSlice[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</div>
<div class="line">                bRes = <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            currentSlice[i] = z+i;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Method 4: Copy data directly into the raw buffers of the array.</span></div>
<div class="line">    <span class="comment">// Requires caller to setup data buffers in the correct format</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Pointer to user data for a XY slice.</span></div>
<div class="line">    <span class="comment">// This is for example purposes only.</span></div>
<div class="line">    SDICOS::S_UINT16 * userDataForSlice = <span class="keyword">new</span> SDICOS::S_UINT16[width*height];</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 i = 0; i &lt; (width*height); ++i) </div>
<div class="line">        userDataForSlice[i] = SDICOS::S_UINT16(i);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// point to data buffer for Array2D object</span></div>
<div class="line">        SDICOS::S_UINT16 * destSlice = vnVolume[z].<a class="code" href="class_s_d_i_c_o_s_1_1_array1_d.html#a9014e01edd68fd0d5c611364aa51200d">GetBuffer</a>();</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Copy user data into the volume slice.</span></div>
<div class="line">        <span class="comment">// Alternatively, the user can </span></div>
<div class="line">        memcpy(destSlice, userDataForSlice, width*height*<span class="keyword">sizeof</span>(SDICOS::S_UINT16));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">delete</span> [] userDataForSlice;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Verify data </span></div>
<div class="line">    <span class="keywordflow">for</span>(z = 0; z &lt; depth; ++z)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 h = 0; h &lt; height; ++h)</div>
<div class="line">    <span class="keywordflow">for</span>(SDICOS::S_UINT32 w = 0; w &lt; width; ++w)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(vnVolume[z][h][w] != SDICOS::S_UINT16(h*width+w))</div>
<div class="line">            bRes = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> bRes;</div>
<div class="line">} <span class="comment">// EndAccessingArray3DLargeData</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_array3_d_large_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_array3_d_large.html">SDICOS::Array3DLarge</a></div><div class="ttdoc">Use for large arrays i.e., those requiring more than 100MB of memory.</div><div class="ttdef"><b>Definition:</b> <a href="_array3_d_large_8h_source.html#l00068">Array3DLarge.h:69</a></div></div>
<div class="ttc" id="a_volume_2_array3_d_large_2main_8cpp_html_a6d4c861944c8464791572ef6a22b2c67"><div class="ttname"><a href="_volume_2_array3_d_large_2main_8cpp.html#a6d4c861944c8464791572ef6a22b2c67">AccessingArray3DLargeData</a></div><div class="ttdeci">bool AccessingArray3DLargeData()</div><div class="ttdoc">Stratovan Corporation Copyright and Disclaimer Notice:</div><div class="ttdef"><b>Definition:</b> <a href="_volume_2_array3_d_large_2main_8cpp_source.html#l00051">Volume/Array3DLarge/main.cpp:51</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_array3_d_large_html_a12e7dede4eaa1a9973cd6949d035b679"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_array3_d_large.html#a12e7dede4eaa1a9973cd6949d035b679">SDICOS::Array3DLarge::GetSlice</a></div><div class="ttdeci">CSliceClass * GetSlice(const S_UINT32 nD)</div><div class="ttdoc">Get a Pointer to the indicated slice.</div><div class="ttdef"><b>Definition:</b> <a href="_array3_d_large_8h_source.html#l00159">Array3DLarge.h:159</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_array1_d_html_a9014e01edd68fd0d5c611364aa51200d"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_array1_d.html#a9014e01edd68fd0d5c611364aa51200d">SDICOS::Array1D&lt; Array2D&lt; CType &gt; * &gt;::GetBuffer</a></div><div class="ttdeci">const Array2D&lt; CType &gt; * * GetBuffer() const</div><div class="ttdef"><b>Definition:</b> <a href="_array1_d_8h_source.html#l00292">Array1D.h:292</a></div></div>
<div class="ttc" id="a_d_i_c_o_s_8h_html"><div class="ttname"><a href="_d_i_c_o_s_8h.html">DICOS.h</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_array3_d_large_html_a6ec71fc4e82d86133948742fd923ce45"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_array3_d_large.html#a6ec71fc4e82d86133948742fd923ce45">SDICOS::Array3DLarge::SetSize</a></div><div class="ttdeci">bool SetSize(const S_UINT32 nWidth, const S_UINT32 nHeight, const S_UINT32 nDepth)</div><div class="ttdoc">Set the dimensions of the volume.</div><div class="ttdef"><b>Definition:</b> <a href="_array3_d_large_8h_source.html#l00811">Array3DLarge.h:811</a></div></div>
<div class="ttc" id="a_client_2_c-_echo_2main_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="_client_2_c-_echo_2main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdoc">Stratovan Corporation Copyright and Disclaimer Notice:</div><div class="ttdef"><b>Definition:</b> <a href="_client_2_c-_echo_2main_8cpp_source.html#l00030">Client/C-Echo/main.cpp:30</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_array2_d_html"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_array2_d.html">SDICOS::Array2D</a></div><div class="ttdoc">Allocates memory on a single contiguous block for efficient access. Use Array2DLarge for large arrays...</div><div class="ttdef"><b>Definition:</b> <a href="_array2_d_8h_source.html#l00043">Array2D.h:44</a></div></div>
<div class="ttc" id="aclass_s_d_i_c_o_s_1_1_array2_d_html_adccd8453c3af157553cab831e25346bf"><div class="ttname"><a href="class_s_d_i_c_o_s_1_1_array2_d.html#adccd8453c3af157553cab831e25346bf">SDICOS::Array2D::GetBuffer</a></div><div class="ttdeci">const CType * GetBuffer() const</div><div class="ttdef"><b>Definition:</b> <a href="_array2_d_8h_source.html#l00274">Array2D.h:274</a></div></div>
<!--
Stratovan Corporation Copyright and Disclaimer Notice:
Copyright (c) 2014 Stratovan Corporation. All Rights Reserved.
Permission to use, copy, modify, and distribute this software and its
documentation without a signed licensing agreement, is hereby granted,
provided that this copyright notice, this paragraph and the following two
paragraphs appear in all copies, modifications, and distributions.
IN NO EVENT SHALL STRATOVAN BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
STRATOVAN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
STRATOVAN SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED
TO, THE IMPLIED WARRANTIES OF USE AND FITNESS FOR A PARTICULAR PURPOSE. THE
SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED HEREUNDER IS
PROVIDED "AS IS". STRATOVAN HAS NO OBLIGATION TO PROVIDE MAINTENANCE,
SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS UNLESS DIRECTED BY THE
U.S. GOVERNMENT'S TRANSPORTATION SECURITY ADMINISTRATION (TSA).
-->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
    <center>Copyright (c) 2014 by Stratovan Corporation</br>
    Generated on Mon Sep 25 2023 00:04:58 for Stratovan DICOS Toolkit Class Interfaces and Architecture by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18</center>
</small></address>
</body>
</html>
